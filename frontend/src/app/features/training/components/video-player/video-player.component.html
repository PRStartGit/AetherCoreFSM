<div class="video-player-container" (mousemove)="onMouseMove()" (mouseleave)="showControls = isPlaying ? false : true">
  <video
    #videoElement
    [src]="videoUrl"
    class="w-full h-full"
    (click)="togglePlay()"
  ></video>

  <!-- Custom Controls Overlay -->
  <div class="video-controls" [class.visible]="showControls">
    <!-- Progress Bar -->
    <div class="progress-container">
      <input
        type="range"
        min="0"
        [max]="duration"
        [value]="currentTime"
        (input)="seek($event)"
        class="progress-bar"
      />
      <div class="progress-fill" [style.width.%]="progress"></div>
    </div>

    <!-- Control Buttons -->
    <div class="controls-row">
      <div class="controls-left">
        <button (click)="togglePlay()" class="control-btn" [attr.aria-label]="isPlaying ? 'Pause' : 'Play'">
          <i class="fas" [class.fa-play]="!isPlaying" [class.fa-pause]="isPlaying"></i>
        </button>
        <button (click)="skipBackward()" class="control-btn" aria-label="Skip backward 10 seconds">
          <i class="fas fa-backward"></i>
        </button>
        <button (click)="skipForward()" class="control-btn" aria-label="Skip forward 10 seconds">
          <i class="fas fa-forward"></i>
        </button>
        <div class="volume-control">
          <button (click)="toggleMute()" class="control-btn" [attr.aria-label]="isMuted ? 'Unmute' : 'Mute'">
            <i class="fas" [class.fa-volume-mute]="isMuted || volume === 0" [class.fa-volume-up]="!isMuted && volume > 0"></i>
          </button>
          <input
            type="range"
            min="0"
            max="1"
            step="0.1"
            [value]="volume"
            (input)="setVolume($event)"
            class="volume-slider"
            aria-label="Volume"
          />
        </div>
        <span class="time-display">{{ formatTime(currentTime) }} / {{ formatTime(duration) }}</span>
      </div>

      <div class="controls-right">
        <button (click)="toggleFullscreen()" class="control-btn" [attr.aria-label]="isFullscreen ? 'Exit fullscreen' : 'Fullscreen'">
          <i class="fas" [class.fa-compress]="isFullscreen" [class.fa-expand]="!isFullscreen"></i>
        </button>
      </div>
    </div>
  </div>

  <!-- Loading Spinner -->
  <div *ngIf="!duration" class="loading-spinner">
    <i class="fas fa-spinner fa-spin text-4xl text-white"></i>
  </div>
</div>
